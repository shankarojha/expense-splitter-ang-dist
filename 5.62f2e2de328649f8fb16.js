(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{TDBs:function(e,t,i){"use strict";i.r(t),i.d(t,"DashboardModule",(function(){return A}));var n=i("ofXK"),a=i("tyNb"),o=i("fXoL"),b=i("F5nt"),s=i("5eHb"),r=i("b6Qw");const d=[[["",8,"user"]],[["",8,"dropdown-item"]]],c=[".user",".dropdown-item"];let l=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Cb({type:e,selectors:[["app-navbar"]],ngContentSelectors:c,decls:13,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"navbar-brand"],["id","logo","src","../../assets/icon/bill.png","alt",""],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","ml-auto"],[1,"nav-item","dropdown","active"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"]],template:function(e,t){1&e&&(o.ac(d),o.Nb(0,"nav",0),o.Nb(1,"a",1),o.Jb(2,"img",2),o.lc(3,"X-PENSE-SPLITTER. "),o.Mb(),o.Nb(4,"button",3),o.Jb(5,"span",4),o.Mb(),o.Nb(6,"div",5),o.Nb(7,"ul",6),o.Nb(8,"li",7),o.Nb(9,"a",8),o.Zb(10,0,["class","d-flex align-items-center justify-content-center"]),o.Mb(),o.Nb(11,"div",9),o.Zb(12,1),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb())},styles:[".navbar[_ngcontent-%COMP%]{top:0;z-index:10;height:10vh;width:100%}.nav-item[_ngcontent-%COMP%]{font-weight:800;margin-left:18px;margin-right:18px;padding:10px}.navbar-brand[_ngcontent-%COMP%]{font-size:1.5em}img[_ngcontent-%COMP%]{height:8vh}@media only screen and (max-width:576px){.navbar-collapse[_ngcontent-%COMP%]{z-index:20;background:#444}.navbar-brand[_ngcontent-%COMP%]{font-size:1em}}@media only screen and (min-width:577px) and (max-width:992px){.navbar-collapse[_ngcontent-%COMP%]{z-index:20;background:#444}}"]}),e})();var m=i("3Pt+");function u(e,t){if(1&e&&(o.Nb(0,"div",34),o.Nb(1,"div",35),o.Nb(2,"h6",36),o.lc(3),o.Xb(4,"uppercase"),o.Mb(),o.Mb(),o.Nb(5,"div",35),o.Nb(6,"p",37),o.lc(7),o.Mb(),o.Mb(),o.Mb()),2&e){const e=t.$implicit;o.xb(3),o.nc("Email: ",o.Yb(4,2,e.email),""),o.xb(4),o.nc("Paid: ",e.paid,"")}}function p(e,t){if(1&e){const e=o.Ob();o.Nb(0,"button",20),o.Ub("click",(function(){return o.ec(e),o.Wb().addDebtors()})),o.lc(1,"Add member"),o.Mb()}}let h=(()=>{class e{constructor(e,t,i,n,a){this.route=e,this.appService=t,this.router=i,this.toastr=n,this.Cookie=a,this.userName=this.Cookie.get("firstName")+" "+this.Cookie.get("lastName"),this.userEmail=this.Cookie.get("email"),this.expenseId=this.Cookie.get("selectedExpense"),this.debtorsToAdd=[],this.createdBy=this.userEmail,this.addDebtors=()=>{this.debtorsToAdd.some(e=>e.email===this.addEmail)?this.toastr.error("member already added to list. Please save to continue"):(this.debtorsToAdd.push({email:this.addEmail,paid:this.addPaid}),this.addEmail=null,this.addPaid=null)},this.emptyDebtors=()=>{this.addEmail=null,this.addPaid=null},this.createExpense=()=>{if(this.ExpenseName)if(this.amount)if(this.paidBy)if(this.debtorsToAdd.length<=0)this.toastr.warning("Enter members and amount they have paid");else{let e={ExpenseName:this.ExpenseName,createdBy:this.userEmail,paidBy:this.paidBy,amount:this.amount,debtors:null};this.debtorsToAdd&&(e.debtors=JSON.stringify(this.debtorsToAdd)),e&&this.appService.createExpense(e).subscribe(e=>{200===e.status?(this.toastr.success("New expense added"),setTimeout(()=>{this.router.navigate(["/dashboard"])},2e3),this.toastr.success(e.message),this.debtorsToAdd=null):this.toastr.error(e.message)},e=>{this.toastr.error(e)})}else this.toastr.warning("Enter payer's email");else this.toastr.warning("Enter amount");else this.toastr.warning("Enter expense name")},this.logout=()=>{this.appService.logout().subscribe(e=>{200===e.status?(this.Cookie.deleteAll(),this.router.navigate(["/"])):this.toastr.error(e.message)},e=>{this.toastr.error("some error occured")})}}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(a.a),o.Ib(b.a),o.Ib(a.b),o.Ib(s.b),o.Ib(r.a))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-create-expense"]],decls:50,vars:8,consts:[[1,"user"],[1,"dropdown-item",3,"click"],[1,"fa","fa-sign-out"],[1,"container"],[1,"row"],[1,"col-12","text-center","mt-3"],[2,"border-bottom","2px solid #000","padding-bottom","3px"],[1,"row","d-flex","justify-content-center","align-items-center"],[1,"form-group","mt-3"],["for","expenseName"],["name","ExpenseName","type","text","id","expenseName","placeholder","Expense name",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group"],["for","amount"],["name","amount","type","number","id","amount","placeholder","Amount",1,"form-control",3,"ngModel","ngModelChange"],["for","paidBy"],["name","paidBy","type","text","id","paidBy","placeholder","Paid By",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","text-center","mt-5"],["class","col-12","style","border: 1px solid black; padding: 10px;",4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#memberAdd","id","addMemberTogglerId",1,"btn","btn-dark","mt-3"],[1,"col-12","text-center"],["type","button",1,"btn","btn-success",3,"click"],["id","memberAdd","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","text-center"],["type","text","placeholder","email",1,"mt-3",3,"ngModel","ngModelChange"],["type","number","placeholder","amount paid",1,"mt-3",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],[1,"col-12",2,"border","1px solid black","padding","10px"],[1,"col-12"],[2,"color","rgb(0, 140, 255)"],[2,"color","rgb(255, 51, 0)"]],template:function(e,t){1&e&&(o.Nb(0,"app-navbar"),o.Nb(1,"span",0),o.lc(2),o.Mb(),o.Nb(3,"a",1),o.Ub("click",(function(){return t.logout()})),o.lc(4,"Logout "),o.Jb(5,"i",2),o.Mb(),o.Mb(),o.Nb(6,"body"),o.Nb(7,"div",3),o.Nb(8,"div",4),o.Nb(9,"div",5),o.Nb(10,"h3",6),o.lc(11,"Create Expense"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(12,"div",3),o.Nb(13,"div",7),o.Nb(14,"form"),o.Nb(15,"div",8),o.Nb(16,"label",9),o.lc(17,"Enter name for your expense"),o.Mb(),o.Nb(18,"input",10),o.Ub("ngModelChange",(function(e){return t.ExpenseName=e})),o.Mb(),o.Mb(),o.Nb(19,"div",11),o.Nb(20,"label",12),o.lc(21,"Amount"),o.Mb(),o.Nb(22,"input",13),o.Ub("ngModelChange",(function(e){return t.amount=e})),o.Mb(),o.Mb(),o.Nb(23,"div",11),o.Nb(24,"label",14),o.lc(25,"Enter email of the payer"),o.Mb(),o.Nb(26,"input",15),o.Ub("ngModelChange",(function(e){return t.paidBy=e})),o.Mb(),o.Mb(),o.Nb(27,"div",16),o.kc(28,u,8,4,"div",17),o.Nb(29,"button",18),o.lc(30,"Add member"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(31,"div",19),o.Nb(32,"button",20),o.Ub("click",(function(){return t.createExpense()})),o.lc(33,"Create expense"),o.Mb(),o.Mb(),o.Mb(),o.Nb(34,"div",21),o.Nb(35,"div",22),o.Nb(36,"div",23),o.Nb(37,"div",24),o.Nb(38,"h5",25),o.lc(39,"Confirmation"),o.Mb(),o.Nb(40,"button",26),o.Ub("click",(function(){return t.emptyDebtors()})),o.Nb(41,"span",27),o.lc(42,"\xd7"),o.Mb(),o.Mb(),o.Mb(),o.Nb(43,"div",28),o.Nb(44,"input",29),o.Ub("ngModelChange",(function(e){return t.addEmail=e})),o.Mb(),o.Nb(45,"input",30),o.Ub("ngModelChange",(function(e){return t.addPaid=e})),o.Mb(),o.Mb(),o.Nb(46,"div",31),o.kc(47,p,2,0,"button",32),o.Nb(48,"button",33),o.Ub("click",(function(){return t.emptyDebtors()})),o.lc(49,"Close"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&e&&(o.xb(2),o.mc(t.userName),o.xb(16),o.bc("ngModel",t.ExpenseName),o.xb(4),o.bc("ngModel",t.amount),o.xb(4),o.bc("ngModel",t.paidBy),o.xb(2),o.bc("ngForOf",t.debtorsToAdd),o.xb(16),o.bc("ngModel",t.addEmail),o.xb(1),o.bc("ngModel",t.addPaid),o.xb(2),o.bc("ngIf",t.addEmail&&t.addPaid))},directives:[l,m.h,m.d,m.e,m.a,m.c,m.f,m.g,n.i,n.j],pipes:[n.m],styles:["*[_ngcontent-%COMP%]{overflow:hidden}input[_ngcontent-%COMP%]{border-color:#00f}"]}),e})();var g=i("7fM4");function M(e,t){if(1&e){const e=o.Ob();o.Nb(0,"tr",27),o.Ub("click",(function(){o.ec(e);const i=t.$implicit;return o.Wb().selectedExpense(i.expenseId)})),o.Nb(1,"td"),o.lc(2),o.Mb(),o.Nb(3,"td"),o.lc(4),o.Mb(),o.Nb(5,"td"),o.lc(6),o.Mb(),o.Nb(7,"td"),o.lc(8),o.Mb(),o.Mb()}if(2&e){const e=t.$implicit;o.cc("routerLink","/dashboard/expense/",e.expenseId,""),o.xb(2),o.mc(e.expenseName),o.xb(2),o.mc(e.amount),o.xb(2),o.mc(e.expenseId),o.xb(2),o.mc(e.createdBy)}}function f(e,t){1&e&&(o.Nb(0,"p"),o.lc(1,"No new notifications available"),o.Mb())}function N(e,t){if(1&e&&(o.Nb(0,"p"),o.Jb(1,"i",28),o.lc(2),o.Mb()),2&e){const e=t.$implicit;o.xb(2),o.nc("\xa0\xa0",e,"")}}const v=["removeMemberToggler"];function x(e,t){if(1&e){const e=o.Ob();o.Nb(0,"input",42),o.Ub("ngModelChange",(function(t){return o.ec(e),o.Wb().amount=t})),o.Mb()}if(2&e){const e=o.Wb();o.bc("ngModel",e.amount)}}function y(e,t){if(1&e){const e=o.Ob();o.Nb(0,"button",43),o.Ub("click",(function(){return o.ec(e),o.Wb().editExpense()})),o.lc(1,"Save"),o.Mb()}}function k(e,t){1&e&&(o.Nb(0,"h6"),o.lc(1,"Payment Complete"),o.Mb())}function C(e,t){if(1&e&&(o.Nb(0,"h6"),o.lc(1),o.Mb()),2&e){const e=o.Wb().$implicit;o.xb(1),o.nc("Remaining: ",e.remaining,"")}}function E(e,t){if(1&e){const e=o.Ob();o.Nb(0,"div",44),o.Nb(1,"div",45),o.Nb(2,"h6"),o.lc(3),o.Mb(),o.Mb(),o.Nb(4,"div",46),o.Nb(5,"h6"),o.lc(6),o.Mb(),o.Mb(),o.Nb(7,"div",46),o.kc(8,k,2,0,"h6",47),o.kc(9,C,2,1,"h6",47),o.Mb(),o.Nb(10,"div",46),o.Nb(11,"h6"),o.lc(12),o.Mb(),o.Mb(),o.Nb(13,"div",46),o.Nb(14,"button",48),o.Ub("click",(function(){o.ec(e);const i=t.$implicit;return o.Wb().setPaid(i.paid,i.email)})),o.lc(15,"Update Payment"),o.Mb(),o.Mb(),o.Nb(16,"div",49),o.Nb(17,"button",50,51),o.Ub("click",(function(){o.ec(e);const i=t.$implicit;return o.Wb().removeMember(i.email)})),o.lc(19,"Remove Member's Payment"),o.Mb(),o.Mb(),o.Mb()}if(2&e){const e=t.$implicit;o.xb(3),o.nc("Member: ",e.email,""),o.xb(3),o.nc("Owed:",e.debt,""),o.xb(2),o.bc("ngIf",0==e.remaining),o.xb(1),o.bc("ngIf",0!==e.remaining),o.xb(3),o.nc("Paid: ",e.paid,"")}}function P(e,t){if(1&e&&(o.Nb(0,"p"),o.Jb(1,"i",52),o.lc(2),o.Mb()),2&e){const e=t.$implicit;o.xb(2),o.nc("\xa0\xa0",e,"")}}function w(e,t){if(1&e&&(o.Nb(0,"p"),o.Jb(1,"i",52),o.lc(2),o.Mb()),2&e){const e=t.$implicit;o.xb(2),o.nc("\xa0\xa0",e,"")}}function O(e,t){if(1&e){const e=o.Ob();o.Nb(0,"button",53),o.Ub("click",(function(){return o.ec(e),o.Wb().addDebtors()})),o.lc(1,"Add member"),o.Mb()}}const I=[{path:"",component:(()=>{class e{constructor(e,t,i,n,a){this.appService=e,this.router=t,this.toastr=i,this.Cookie=n,this.SocketService=a,this.userExpenses=[],this.userName=this.Cookie.get("firstName")+" "+this.Cookie.get("lastName"),this.userEmail=this.Cookie.get("email"),this.userNotifications=[],this.getUserexpenses=()=>{this.appService.getUserExpenses().subscribe(e=>{if(200==e.status)for(let t of e.data)this.userExpenses.push({expenseName:t.ExpenseName,amount:t.amount,expenseId:t.ExpenseId,createdOn:t.createdOn,createdBy:t.createdBy});else this.toastr.warning(e.message)})},this.getNotification=()=>{this.SocketService.getNotification().subscribe(e=>{for(let t of e.message)this.userNotifications.push(t);this.userNotifications=this.userNotifications.reverse(),this.userNotificationLength=this.userNotifications.length})},this.selectedExpense=e=>{this.userExpenses.map(t=>{t.expenseId===e&&this.Cookie.set("selectedExpense",e)})},this.logout=()=>{this.appService.logout().subscribe(e=>{200===e.status?(this.Cookie.deleteAll(),this.router.navigate(["/"])):this.toastr.error(e.message)},e=>{this.toastr.error("some error occured")})},this.deleteExpense=e=>{this.appService.deleteExpense(e).subscribe(e=>{200===e.status?this.toastr.success(e.message):this.toastr.error(e.message)},e=>{this.toastr.error("some error occured")})}}ngOnInit(){this.SocketService.sendNotification(this.userEmail),this.getNotification(),this.getUserexpenses()}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(b.a),o.Ib(a.b),o.Ib(s.b),o.Ib(r.a),o.Ib(g.a))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-dashboard"]],decls:47,vars:5,consts:[[1,"user"],[1,"dropdown-item",3,"click"],[1,"fa","fa-sign-out"],[1,"container"],[1,"row"],["id","notifications",1,"col-md-2","d-flex","flex-column","align-items-center","justify-content-center"],["routerLink","/dashboard/create",1,"btn","btn-light"],[1,"row","text-center"],["type","button","data-toggle","modal","data-target","#exampleModalLong",1,"btn","btn-light"],[1,"fa","fa-bell"],["id","expenses",1,"col-md-10","text-center"],[1,"table","table-striped","table-dark","text-center"],[1,"thead-light"],["scope","col"],[3,"routerLink","click",4,"ngFor","ngForOf"],["id","exampleModalLong","tabindex","-1","role","dialog","aria-labelledby","exampleModalLongTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],[3,"routerLink","click"],[1,"fa","fa-dot-circle-o"]],template:function(e,t){1&e&&(o.Nb(0,"app-navbar"),o.Nb(1,"span",0),o.lc(2),o.Mb(),o.Nb(3,"a",1),o.Ub("click",(function(){return t.logout()})),o.lc(4,"Logout"),o.Jb(5,"i",2),o.Mb(),o.Mb(),o.Nb(6,"body"),o.Nb(7,"div",3),o.Nb(8,"div",4),o.Nb(9,"div",5),o.Nb(10,"div",4),o.Nb(11,"button",6),o.lc(12,"Create Expense"),o.Mb(),o.Mb(),o.Nb(13,"div",7),o.Nb(14,"button",8),o.lc(15," Notifications\xa0"),o.Nb(16,"i",9),o.lc(17),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(18,"div",10),o.Nb(19,"table",11),o.Nb(20,"thead",12),o.Nb(21,"tr"),o.Nb(22,"th",13),o.lc(23,"Expense"),o.Mb(),o.Nb(24,"th",13),o.lc(25,"Amount"),o.Mb(),o.Nb(26,"th",13),o.lc(27,"Expense Id"),o.Mb(),o.Nb(28,"th",13),o.lc(29,"Creator"),o.Mb(),o.Mb(),o.Mb(),o.Nb(30,"tbody"),o.kc(31,M,9,5,"tr",14),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(32,"div",15),o.Nb(33,"div",16),o.Nb(34,"div",17),o.Nb(35,"div",18),o.Nb(36,"h5",19),o.lc(37,"Your notifications"),o.Mb(),o.Nb(38,"button",20),o.Nb(39,"span",21),o.lc(40,"\xd7"),o.Mb(),o.Mb(),o.Mb(),o.Nb(41,"div",22),o.kc(42,f,2,0,"p",23),o.kc(43,N,3,1,"p",24),o.Mb(),o.Nb(44,"div",25),o.Nb(45,"button",26),o.lc(46,"Close"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&e&&(o.xb(2),o.mc(t.userName),o.xb(15),o.nc("\xa0",t.userNotificationLength,""),o.xb(14),o.bc("ngForOf",t.userExpenses),o.xb(11),o.bc("ngIf",0==t.userNotifications.length),o.xb(1),o.bc("ngForOf",t.userNotifications))},directives:[l,a.c,n.i,n.j],styles:["#notifications[_ngcontent-%COMP%]{background:#414141;color:#fff}#expenses[_ngcontent-%COMP%], #notifications[_ngcontent-%COMP%]{margin-top:20px}tr[_ngcontent-%COMP%]:hover{background:#5a5a5a;color:#fff;cursor:pointer;transition:.25s}.modal-dialog[_ngcontent-%COMP%]{position:fixed;margin:auto;width:320px;left:0;overflow-y:initial!important}.modal-body[_ngcontent-%COMP%]{height:80vh;overflow-y:auto}button[_ngcontent-%COMP%]{margin:5px}@media only screen and (max-width:576px){body[_ngcontent-%COMP%]{font-size:.6em}button[_ngcontent-%COMP%]{font-size:.8em}}"]}),e})()},{path:"expense/:expenseId",component:(()=>{class e{constructor(e,t,i,n,a,o){this.route=e,this.appService=t,this.router=i,this.toastr=n,this.Cookie=a,this.SocketService=o,this.userName=this.Cookie.get("firstName")+" "+this.Cookie.get("lastName"),this.userEmail=this.Cookie.get("email"),this.expenseId=this.Cookie.get("selectedExpense"),this.members=[],this.history=[],this.changePayment=[],this.membersToremove=[],this.debtorsToAdd=[],this.removeMemberToggle=!1,this.toggleClass=!1,this.paymentChanged=!1,this.amountChangeTOggler=!1,this.getExpenseDetails=()=>{this.appService.getExpenseDetails(this.Cookie.get("selectedExpense")).subscribe(e=>{this.expenseName=e.data.ExpenseName,this.createdOn=e.data.createdOn,this.createdBy=e.data.createdBy,this.amount=e.data.amount,this.paidBy=e.data.paidBy,this.modifiedOn=e.data.modifiedOn,this.totalDebters=e.data.debtors.length+1;for(let t of e.data.debtors){let e={email:t.email,paid:t.paid,debt:Math.round(this.amount/this.totalDebters),remaining:Math.round(this.amount/this.totalDebters-t.paid)};this.members.push(e)}})},this.getHistory=()=>{this.SocketService.getHistory().subscribe(e=>{for(let t of e.message)this.history.push(t);this.history=this.history.reverse()})},this.savePaymentInfo=()=>{for(let e of this.changePayment){let t={email:e.paidChangeEmail,paid:e.paidChange,ExpenseId:this.expenseId,userEmail:this.Cookie.get("email")};this.appService.updatePayment(t).subscribe(e=>{200==e.status?(this.toastr.success(e.message),this.paymentChanged=!1,setTimeout(()=>{window.location.reload()},1e3)):this.toastr.error(e.message)})}},this.setPaid=(e,t)=>{this.changePaid=e,this.changePaidEmail=t},this.paidClickedEvent=()=>{this.changePayment.push({paidChange:this.changePaid,paidChangeEmail:this.changePaidEmail}),this.paymentChanged=!0},this.removeMember=e=>{this.membersToremove.includes(e)?this.toastr.error("member already added to removal list"):this.membersToremove.push(e)},this.emptyRemoveArray=()=>{this.membersToremove=[]},this.addDebtors=()=>{this.debtorsToAdd.some(e=>e.email===this.addEmail)||this.members.some(e=>e.email===this.addEmail)?this.toastr.error("member already added to list. Please save to continue"):(this.debtorsToAdd.push({email:this.addEmail,paid:this.addPaid}),this.addEmail=null,this.addPaid=null,this.editExpense())},this.emptyDebtors=()=>{this.debtorsToAdd=[],this.addEmail=null,this.addPaid=null},this.editExpense=()=>{if(1==this.paymentChanged)this.toastr.error("Please update payment first");else{let e={userEmail:this.userName,ExpenseId:this.expenseId,amount:this.amount,debtors:null,removeMembers:null};this.debtorsToAdd&&(e.debtors=JSON.stringify(this.debtorsToAdd)),this.membersToremove&&(e.removeMembers=JSON.stringify(this.membersToremove)),e&&this.appService.editExpense(e).subscribe(e=>{200===e.status?(setTimeout(()=>{window.location.reload()},1e3),this.toastr.success("successfully edited")):this.toastr.error(e.message)},e=>{this.toastr.error(e)})}},this.logout=()=>{this.appService.logout().subscribe(e=>{200===e.status?(this.Cookie.deleteAll(),this.router.navigate(["/"])):this.toastr.error(e.message)},e=>{this.toastr.error("some error occured")})},this.deleteExpense=()=>{this.appService.deleteExpense(this.Cookie.get("selectedExpense")).subscribe(e=>{200===e.status?(setTimeout(()=>{this.router.navigate(["/dashboard"])},2e3),this.toastr.success(e.message)):this.toastr.error(e.message)},e=>{this.toastr.error("some error occured")})},this.amountChangeTrigger=()=>{this.amountChangeTOggler=!this.amountChangeTOggler}}ngOnInit(){this.getHistory(),this.getExpenseDetails(),this.SocketService.sendHistory(this.expenseId)}removeItemAll(e,t){for(var i=0;i<e.length;)e[i]===t?e.splice(i,1):++i;return e}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(a.a),o.Ib(b.a),o.Ib(a.b),o.Ib(s.b),o.Ib(r.a),o.Ib(g.a))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-expense"]],viewQuery:function(e,t){var i;1&e&&o.oc(v,!0),2&e&&o.dc(i=o.Vb())&&(t.removeMemberEl=i.first)},decls:122,vars:21,consts:[[1,"user"],[1,"dropdown-item",3,"click"],[1,"fa","fa-sign-out"],[1,"container"],[1,"row"],[1,"col-12"],[2,"color","rgb(0, 0, 253)"],[1,"btn","btn-warning",3,"click"],["style","margin-left: 10px; margin-top: 10px;","type","number",3,"ngModel","ngModelChange",4,"ngIf"],["class","btn btn-success m-3",3,"click",4,"ngIf"],["class","row memberCard",4,"ngFor","ngForOf"],[1,"row","mt-3","mb-3","text-center"],["data-toggle","modal","data-target","#memberAdd","id","addMemberTogglerId",1,"btn","btn-primary"],[1,"col-12","mt-3","mb-3","text-center"],["type","button","data-toggle","modal","data-target","#exampleModalLong",1,"btn","btn-dark",2,"font-size","1.5em"],[1,"col-12","mb-3","text-center"],["type","button",1,"btn","btn-danger",2,"font-size","1.5em",3,"click"],["id","exampleModalLong","tabindex","-1","role","dialog","aria-labelledby","exampleModalLongTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["id","paymentModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],["id","exampleModalLabel",1,"modal-title"],["type","number",3,"ngModel","ngModelChange","change"],["type","button",1,"btn","btn-primary",3,"click"],["id","memberRemoval","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["id","memberAdd","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["type","text","placeholder","email",3,"ngModel","ngModelChange"],["type","number","placeholder","amount paid",3,"ngModel","ngModelChange"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","number",2,"margin-left","10px","margin-top","10px",3,"ngModel","ngModelChange"],[1,"btn","btn-success","m-3",3,"click"],[1,"row","memberCard"],[1,"col-12","mt-3","text-center"],[1,"col-6","pt-3","pb-3","d-flex","align-items-center","justify-content-center","flex-column",2,"border","1px solid black"],[4,"ngIf"],["data-toggle","modal","data-target","#paymentModal",1,"btn","btn-warning",3,"click"],[1,"col-12","pt-3","pb-3","d-flex","align-items-center","justify-content-center","flex-column",2,"border","1px solid black"],["data-toggle","modal","data-target","#memberRemoval","id","removeMemberTogglerId",1,"btn","btn-danger",3,"click"],["removeMemberToggler",""],[1,"fa","fa-dot-circle-o"],["type","button",1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&(o.Nb(0,"app-navbar"),o.Nb(1,"span",0),o.lc(2),o.Mb(),o.Nb(3,"a",1),o.Ub("click",(function(){return t.logout()})),o.lc(4,"Logout "),o.Jb(5,"i",2),o.Mb(),o.Mb(),o.Nb(6,"body"),o.Nb(7,"div",3),o.Nb(8,"div",4),o.Nb(9,"div",5),o.Nb(10,"h3"),o.lc(11,"Expense Name:"),o.Mb(),o.Nb(12,"h4",6),o.lc(13),o.Mb(),o.Mb(),o.Nb(14,"div",5),o.Nb(15,"h6"),o.lc(16,"Amount: "),o.Nb(17,"h4",6),o.lc(18),o.Mb(),o.Nb(19,"button",7),o.Ub("click",(function(){return t.amountChangeTrigger()})),o.lc(20,"Change amount"),o.Mb(),o.kc(21,x,1,1,"input",8),o.kc(22,y,2,0,"button",9),o.Mb(),o.Mb(),o.Nb(23,"div",5),o.Nb(24,"h6"),o.lc(25),o.Xb(26,"uppercase"),o.Mb(),o.Mb(),o.Nb(27,"div",5),o.Nb(28,"h6"),o.lc(29),o.Xb(30,"date"),o.Mb(),o.Mb(),o.Nb(31,"div",5),o.Nb(32,"h6"),o.lc(33),o.Xb(34,"date"),o.Mb(),o.Mb(),o.Mb(),o.kc(35,E,20,5,"div",10),o.Nb(36,"div",11),o.Nb(37,"div",5),o.Nb(38,"button",12),o.lc(39,"Add new member"),o.Mb(),o.Mb(),o.Mb(),o.Nb(40,"div",4),o.Nb(41,"div",13),o.Nb(42,"button",14),o.lc(43," History "),o.Mb(),o.Mb(),o.Nb(44,"div",15),o.Nb(45,"button",16),o.Ub("click",(function(){return t.deleteExpense()})),o.lc(46," Delete expense "),o.Mb(),o.Mb(),o.Mb(),o.Nb(47,"div",17),o.Nb(48,"div",18),o.Nb(49,"div",19),o.Nb(50,"div",20),o.Nb(51,"h5",21),o.lc(52,"History"),o.Mb(),o.Nb(53,"button",22),o.Nb(54,"span",23),o.lc(55,"\xd7"),o.Mb(),o.Mb(),o.Mb(),o.Nb(56,"div",24),o.kc(57,P,3,1,"p",25),o.Mb(),o.Nb(58,"div",26),o.Nb(59,"button",27),o.lc(60,"Close"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(61,"div",17),o.Nb(62,"div",18),o.Nb(63,"div",19),o.Nb(64,"div",20),o.Nb(65,"h5",21),o.lc(66,"History"),o.Mb(),o.Nb(67,"button",22),o.Nb(68,"span",23),o.lc(69,"\xd7"),o.Mb(),o.Mb(),o.Mb(),o.Nb(70,"div",24),o.kc(71,w,3,1,"p",25),o.Mb(),o.Nb(72,"div",26),o.Nb(73,"button",27),o.lc(74,"Close"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(75,"div",28),o.Nb(76,"div",29),o.Nb(77,"div",19),o.Nb(78,"div",20),o.Nb(79,"h5",30),o.lc(80,"Modal title"),o.Mb(),o.Nb(81,"button",22),o.Nb(82,"span",23),o.lc(83,"\xd7"),o.Mb(),o.Mb(),o.Mb(),o.Nb(84,"div",24),o.Nb(85,"input",31),o.Ub("ngModelChange",(function(e){return t.changePaid=e}))("change",(function(){return t.paidClickedEvent()})),o.Mb(),o.Mb(),o.Nb(86,"div",26),o.Nb(87,"button",32),o.Ub("click",(function(){return t.savePaymentInfo()})),o.lc(88,"Save changes"),o.Mb(),o.Nb(89,"button",27),o.lc(90,"Close"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(91,"div",33),o.Nb(92,"div",29),o.Nb(93,"div",19),o.Nb(94,"div",20),o.Nb(95,"h5",30),o.lc(96,"Confirmation"),o.Mb(),o.Nb(97,"button",34),o.Ub("click",(function(){return t.emptyRemoveArray()})),o.Nb(98,"span",23),o.lc(99,"\xd7"),o.Mb(),o.Mb(),o.Mb(),o.Nb(100,"div",35),o.Nb(101,"button",36),o.Ub("click",(function(){return t.editExpense()})),o.lc(102,"Remove"),o.Mb(),o.Mb(),o.Nb(103,"div",26),o.Nb(104,"button",37),o.Ub("click",(function(){return t.emptyRemoveArray()})),o.lc(105,"Close"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(106,"div",38),o.Nb(107,"div",29),o.Nb(108,"div",19),o.Nb(109,"div",20),o.Nb(110,"h5",30),o.lc(111,"Add member"),o.Mb(),o.Nb(112,"button",34),o.Ub("click",(function(){return t.emptyDebtors()})),o.Nb(113,"span",23),o.lc(114,"\xd7"),o.Mb(),o.Mb(),o.Mb(),o.Nb(115,"div",35),o.Nb(116,"input",39),o.Ub("ngModelChange",(function(e){return t.addEmail=e})),o.Mb(),o.Nb(117,"input",40),o.Ub("ngModelChange",(function(e){return t.addPaid=e})),o.Mb(),o.Mb(),o.Nb(118,"div",26),o.kc(119,O,2,0,"button",41),o.Nb(120,"button",37),o.Ub("click",(function(){return t.emptyDebtors()})),o.lc(121,"Close"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&e&&(o.xb(2),o.mc(t.userName),o.xb(11),o.mc(t.expenseName),o.xb(5),o.mc(t.amount),o.xb(3),o.bc("ngIf",t.amountChangeTOggler),o.xb(1),o.bc("ngIf",t.amountChangeTOggler),o.xb(3),o.nc("Paid By: ''",o.Yb(26,15,t.paidBy),"'"),o.xb(4),o.nc("Created on: ",o.Yb(30,17,t.createdOn),""),o.xb(4),o.nc("Last modified on: ",o.Yb(34,19,t.modifiedOn),""),o.xb(2),o.bc("ngForOf",t.members),o.xb(22),o.bc("ngForOf",t.history),o.xb(14),o.bc("ngForOf",t.history),o.xb(14),o.bc("ngModel",t.changePaid),o.xb(31),o.bc("ngModel",t.addEmail),o.xb(1),o.bc("ngModel",t.addPaid),o.xb(2),o.bc("ngIf",t.addEmail&&t.addPaid))},directives:[l,n.j,n.i,m.g,m.a,m.c,m.f],pipes:[n.m,n.d],styles:["h6[_ngcontent-%COMP%]{font-size:1em}.memberCard[_ngcontent-%COMP%]{color:#fff;border:3px solid #fff;background-color:rgba(0,0,0,.719)}@media only screen and (max-width:576px){button[_ngcontent-%COMP%]{font-size:.8em}}"]}),e})()},{path:"create",component:h}];let T=(()=>{class e{}return e.\u0275mod=o.Gb({type:e}),e.\u0275inj=o.Fb({factory:function(t){return new(t||e)},imports:[[a.e.forChild(I)],a.e]}),e})();var S=i("PCNd");let A=(()=>{class e{}return e.\u0275mod=o.Gb({type:e}),e.\u0275inj=o.Fb({factory:function(t){return new(t||e)},imports:[[n.b,T,S.a,m.b]]}),e})()}}]);